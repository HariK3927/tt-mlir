# `ttrt`

This tool is intended to be a swiss army knife for working with flatbuffers 
generated by the compiler.  Its primary role is to inspect and run flatbuffer
files.  It enables the running of flatbuffer files without a front-end runtime.

## Building

```bash
source env/activate
cmake --build build -- ttrt
ttrt --help
```

## Generate a flatbuffer file

See the [ttmlir-opt](./ttmlir-opt.md) documentation for more information on how to generate a flatbuffer file.

## Read sections from the flatbuffer

```bash
ttrt read --section version out.ttnn
ttrt read --section system-desc out.ttnn
ttrt read out.ttnn # Dump the whole thing as json
ttrt read --help
```

## Query information about the current system

Note: It's required to be on a system with silicon and to have a runtime enabled
build `-DTTMLIR_ENABLE_RUNTIME=ON`.

```bash
ttrt query --system-desc
ttrt query --save-system-desc n300.ttsys
```

## Execute flatbuffer files

Note:
- It's required to be on a system with silicon and to have a runtime enabled
build `-DTTMLIR_ENABLE_RUNTIME=ON`.
- It's required to have installed `torch` in your python environment.

```bash
ttrt run out.ttnn
```

## ttrt is written as a python library, so it can be used in custom python scripts

```python
import ttrt.binary

fbb = ttrt.binary.load_from_path("out.ttnn")
d = ttrt.binary.as_dict(fbb)
```
